# 作業系統 hw2

## 資工三 111590012 林品緯

### 4.8

1. 大量執行緒做簡單操作
   - 像是把計算 1~n 總和切成好幾等份給不同執行緒計算
2. 需保證任務順序性的工作流程

### 4.14

> #### (a)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.4)+\frac{0.4}{8}} &= \frac{1}{0.6+0.05} \\
> &=\frac{1}{0.65} \\
> &=1.538
> \end{aligned}
> $$
>
> #### (b)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.4)+\frac{0.4}{16}} &= \frac{1}{0.6+0.025} \\
> &=\frac{1}{0.625} \\
> &=1.6
> \end{aligned}
> $$

> #### (a)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.67)+\frac{0.67}{2}} &= \frac{1}{0.33+0.335} \\
> &=\frac{1}{0.665} \\
> &=1.504
> \end{aligned}
> $$
>
> #### (b)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.67)+\frac{0.67}{4}} &= \frac{1}{0.33+0.1675} \\
> &=\frac{1}{0.4975} \\
> &=2.011
> \end{aligned}
> $$

> #### (a)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.9)+\frac{0.9}{4}} &= \frac{1}{0.1+0.225} \\
> &=\frac{1}{0.325} \\
> &=3.007
> \end{aligned}
> $$
>
> #### (b)
>
> $$
> \begin{aligned}
> \frac{1}{(1-0.9)+\frac{0.9}{8}} &= \frac{1}{0.1+0.1125} \\
> &=\frac{1}{0.2125} \\
> &=4.706
> \end{aligned}
> $$

### 4.20

### (a)

有些核心會閒置，無法使用全部核心

### (b)

每個核心的都能運行一個 kernel thread，是良好的平衡

### \(c\)

能夠更靈活的排程，但排程會產生排程開銷，可能會造成效能損失

### 5.12

### (a)

為了提高 CPU 使用率，系統可能會採取批次處理或長作業優先策略，讓 CPU 持續忙碌。但這樣會讓小型或即時性的互動程式必須等很久，導致 回應時間增加。

### (b)

若排程器為了降低平均週轉時間，可能會讓短作業先執行。但這會導致長作業一直被延後，最長等待時間可能變得很大。

### \(c\)

有些排程策略（如 I/O 優先）會讓 CPU 暫時閒置，只為了讓 I/O 作業能快速處理，這會降低 CPU 使用率。若優先執行 CPU 密集型作業，I/O 作業會排在後面，可能會造成 I/O 裝置閒置。

### 5.17

#### (a)

| FCFS | P1  |     | P2  |     | P3  |     | P4  |     | P5  |     |
| ---- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0    |     | 5   |     | 8   |     | 9   |     | 16  |     | 20  |

| SJF | P3  |     | P2  |     | P5  |     | P1  |     | P4  |     |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0   |     | 1   |     | 4   |     | 8   |     | 13  |     | 20  |

| Nonpreemptive Priority Scheduling | P1  |     | P5  |     | P3  |     | P4  |     | P2  |     |
| --------------------------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0                                 |     | 5   |     | 9   |     | 10  |     | 17  |     | 20  |

| Round Robin (Quantum = 2) | P1  |     | P2  |     | P3  |     | P4  |     | P5  |     | P1  |     | P2  |     | P4  |     | P5  |     | P1  |     | P4  |     | P4  |     |
| ------------------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0                         |     | 2   |     | 4   |     | 5   |     | 7   |     | 9   |     | 11  |     | 12  |     | 14  |     | 16  |     | 17  |     | 19  |     | 20  |

#### (b)

| FCFS |     |
| ---- | --- |
| P1   | 5   |
| P2   | 8   |
| P3   | 9   |
| P4   | 16  |
| P5   | 20  |

| SJF |     |
| --- | --- |
| P1  | 13  |
| P2  | 4   |
| P3  | 1   |
| P4  | 20  |
| P5  | 8   |

| Nonpreemptive Priority Scheduling |     |
| --------------------------------- | --- |
| P1                                | 5   |
| P2                                | 20  |
| P3                                | 10  |
| P4                                | 17  |
| P5                                | 9   |

| Round Robin (Quantum = 2) |     |
| ------------------------- | --- |
| P1                        | 17  |
| P2                        | 12  |
| P3                        | 5   |
| P4                        | 20  |
| P5                        | 16  |

#### \(c\)

| FCFS |     |
| ---- | --- |
| P1   | 0   |
| P2   | 5   |
| P3   | 8   |
| P4   | 9   |
| P5   | 16  |

| SJF |     |
| --- | --- |
| P1  | 8   |
| P2  | 1   |
| P3  | 0   |
| P4  | 13  |
| P5  | 4   |

| Nonpreemptive Priority Scheduling |     |
| --------------------------------- | --- |
| P1                                | 0   |
| P2                                | 17  |
| P3                                | 9   |
| P4                                | 10  |
| P5                                | 5   |

| Round Robin (Quantum = 2) |     |
| ------------------------- | --- |
| P1                        | 12  |
| P2                        | 9   |
| P3                        | 4   |
| P4                        | 13  |
| P5                        | 12  |

#### (d)

|                                   |                                    |
| --------------------------------- | ---------------------------------- |
| FCFS                              | (0 + 5 + 8 + 9 + 16) / 5=7.6ms     |
| SJF                               | (8+ 1 + 0 + 13 + 4) / 5 = 5.2ms    |
| Nonpreemptive Priority Scheduling | (0 + 17 + 9 + 10 + 5) / 5 = 8.2ms  |
| Round Robin (Quantum = 2)         | (12 + 9 + 4 + 13 + 12) / 5 = 10 ms |

### 5.22

#### (a)

- CPU times: 11ms
- context switch: 11x0.1ms = 1.1ms
- total: 11ms+1.1ms = 12.1ms

$$
\begin{aligned}
\frac{11}{12.1} = 0.909
\end{aligned}
$$

#### (b)

- CPU times: 20ms
- context switch: 11x0.1ms = 1.1ms
- total: 20ms+1.1ms = 21.1ms

$$
\begin{aligned}
\frac{20}{21.1} = 0.947
\end{aligned}
$$

### 5.25

#### (a)

不有利於短作業，因為它只會先進先處，不考慮任務的運行長短

#### (b)

中等有利短作業，當時間片段設定得當時，短任務不會被長作業卡住

#### \(c\)

非常有利於短作業，因為短作業會有高優先級，並且長作業會被動態調整到低優先級

### 6.7

#### (a)

- `top`
  - 有機率發生同時讀寫得情況
- `stack[top]`
  - `stack` 可能會因為 `top` 寫入未完成發生讀取錯誤的情況

#### (b)

- 使用 `mutex`，在操作前要 `lock`，操作後要 `unlock`
- 使用 atomic operation

### 6.15

禁用中斷會阻止處理器響應外部事件，像是硬件中斷或計時器中斷。這代表在同步操作期間，系統會無法處理其他重要的事件，可能會導致延遲或無法及時處理其他程序的需求。

### 6.18

為了避免忙等待並使進程在等待互斥鎖時被阻塞，我們可以引入一個等待隊列，當鎖不可用時將進程放入隊列並使其阻塞，並且在鎖釋放後將隊列中的進程喚醒。
